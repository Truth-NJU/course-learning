{"remainingRequest":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/src/views/teacher/CourseEdit.vue?vue&type=style&index=0&id=613e97cc&scoped=true&lang=css&","dependencies":[{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/src/views/teacher/CourseEdit.vue","mtime":1625946131165},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hbGVydCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGxlZnQ6IDUwJTsKICB0b3A6IDEwMHB4OwogIHotaW5kZXg6IDk5OTsKfQouZml4ZWQgewogIHBvc2l0aW9uOiBmaXhlZDsKfQo="},{"version":3,"sources":["CourseEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CourseEdit.vue","sourceRoot":"src/views/teacher","sourcesContent":["<template>\n  <div>\n    <div>\n      <v-card class=\"ml-1 mt-8 fixed\">\n        <v-navigation-drawer permanent expand-on-hover width=\"170\">\n          <v-list nav dense>\n            <v-list-item link @click=\"to_msg\">\n              <v-list-item-icon>\n                <v-icon>mdi-folder</v-icon>\n              </v-list-item-icon>\n              <v-list-item-title>课程信息</v-list-item-title>\n            </v-list-item>\n            <v-list-item link @click=\"to_course\">\n              <v-list-item-icon>\n                <v-icon>mdi-folder</v-icon>\n              </v-list-item-icon>\n              <v-list-item-title>课件</v-list-item-title>\n            </v-list-item>\n            <v-list-item link @click=\"to_test\">\n              <v-list-item-icon>\n                <v-icon>mdi-folder</v-icon>\n              </v-list-item-icon>\n              <v-list-item-title>测试</v-list-item-title>\n            </v-list-item>\n            <v-list-item link @click=\"toPost\">\n              <v-list-item-icon>\n                <v-icon>mdi-folder</v-icon>\n              </v-list-item-icon>\n              <v-list-item-title>课程讨论区</v-list-item-title>\n            </v-list-item>\n          </v-list>\n        </v-navigation-drawer>\n      </v-card>\n    </div>\n    <v-container class=\"pl-16 pr-16\">\n      <!-- alert-->\n      <v-alert\n        class=\"alert pink\"\n        outlined\n        type=\"success\"\n        text\n        v-show=\"showAlert\"\n        transition=\"scroll-y-transition\"\n      >\n        {{ alertMsg }}\n      </v-alert>\n\n      <template>\n        <v-row>\n          <v-dialog v-model=\"add_question_dialog\" max-width=\"600\">\n            <v-toolbar color=\"primary\" dark>\n              <v-toolbar-title>课程题目</v-toolbar-title>\n              <v-spacer></v-spacer>\n            </v-toolbar>\n\n            <v-list subheader two-line>\n              <v-list-item\n                v-for=\"question in questions\"\n                :key=\"question.questionId\"\n              >\n                <v-list-item-avatar>\n                  <v-icon class=\"grey lighten-1\" dark>\n                    mdi-file\n                  </v-icon>\n                </v-list-item-avatar>\n\n                <v-list-item-content>\n                  <v-list-item-title\n                    v-text=\"question.questionType\"\n                  ></v-list-item-title>\n\n                  <v-list-item-subtitle\n                    v-text=\"question.question\"\n                  ></v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                  <v-btn @click=\"add_to_test(question.questionId)\">\n                    添加\n                    <v-icon\n                      color=\"grey lighten-1\"\n                      :class=\"\n                        questionIdList.find(q => q === question.questionId)\n                          ? 'green'\n                          : ''\n                      \"\n                      >mdi-arrow-up-bold-box-outline</v-icon\n                    >\n                  </v-btn>\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n            <v-btn @click=\"add_question_dialog = false\">确认</v-btn>\n          </v-dialog>\n        </v-row>\n      </template>\n\n      <!-- 删除 dialog-->\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"deleteDialog\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">删除课件</span>\n              </v-card-title>\n              <v-card-text>\n                是否确认删除课件 {{ currentEditFile.name }} ?\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"deleteDialog = false\">\n                  取消\n                </v-btn>\n                <v-btn\n                  color=\"red darken-1\"\n                  text\n                  @click=\"handleDeleteCourseWare\"\n                >\n                  删除\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"deleteQuestionDialog\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">删除题目</span>\n              </v-card-title>\n              <v-card-text>\n                是否确认删除题目 {{ currentQuestion.question }} ?\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"deleteQuestionDialog = false\"\n                >\n                  取消\n                </v-btn>\n                <v-btn color=\"red darken-1\" text @click=\"delete_question\">\n                  删除\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n      <!-- 编辑 dialog-->\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">编辑课件</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <v-text-field\n                        label=\"文件类型\"\n                        v-model=\"currentEditFile.fileType\"\n                        disabled\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <v-text-field\n                        label=\"文件大小\"\n                        v-model=\"currentEditFile.fileSize\"\n                        disabled\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\">\n                      <v-text-field\n                        label=\"文件名\"\n                        v-model=\"currentEditFile.fileName\"\n                        disabled\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\">\n                      <v-text-field\n                        label=\"课件标题\"\n                        v-model=\"currentEditFile.title\"\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <v-select\n                        :items=\"[true, false]\"\n                        label=\"是否免费\"\n                        v-model=\"currentEditFile.freeFlag\"\n                      ></v-select>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <v-select\n                        :items=\"[true, false]\"\n                        label=\"是否可下载\"\n                        v-model=\"currentEditFile.downloadFlag\"\n                      ></v-select>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <v-select\n                        :items=\"[true, false]\"\n                        label=\"是否有权查看\"\n                        v-model=\"currentEditFile.availableFlag\"\n                      ></v-select>\n                    </v-col>\n                  </v-row>\n                  <v-row class=\"pa-2\">\n                    <v-btn color=\"error\" @click=\"showDeleteFileDialog\">\n                      删除课件\n                    </v-btn>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"dialog = false\">\n                  关闭\n                </v-btn>\n                <v-btn color=\"blue darken-1\" text @click=\"handleEditSubmit\">\n                  保存\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n      <!-- 题目 -->\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"question_dialog\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">创建题目</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col class=\"d-flex\" cols=\"12\" sm=\"6\">\n                      <v-text-field\n                        label=\"课程\"\n                        v-model=\"courseInfo.name\"\n                        disabled\n                      ></v-text-field>\n                    </v-col>\n                    <v-col class=\"d-flex\" cols=\"12\" sm=\"6\">\n                      <v-select\n                        :items=\"question_types\"\n                        label=\"题目类型\"\n                        v-model=\"question.type\"\n                      ></v-select>\n                    </v-col>\n                  </v-row>\n                  <v-col cols=\"12\">\n                    <v-textarea\n                      name=\"question\"\n                      label=\"题目\"\n                      v-model=\"question.question\"\n                    ></v-textarea>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      name=\"answer\"\n                      label=\"答案\"\n                      v-model=\"question.answer\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-textarea\n                      name=\"any\"\n                      label=\"解析\"\n                      v-model=\"question.analysis\"\n                    ></v-textarea>\n                  </v-col>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"question_dialog = false\"\n                >\n                  关闭\n                </v-btn>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"add_question\"\n                  v-if=\"question.type !== ''\"\n                >\n                  保存\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"current_question\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">修改题目</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-col cols=\"12\">\n                    <v-textarea\n                      name=\"question\"\n                      label=\"题目\"\n                      v-model=\"currentQuestion.question\"\n                    ></v-textarea>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-text-field\n                      name=\"answer\"\n                      label=\"答案\"\n                      v-model=\"currentQuestion.answer\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col cols=\"12\">\n                    <v-textarea\n                      name=\"any\"\n                      label=\"解析\"\n                      v-model=\"currentQuestion.analysis\"\n                    ></v-textarea>\n                  </v-col>\n                  <v-row class=\"pa-2\">\n                    <v-btn color=\"error\" @click=\"deleteQuestionDialog = true\">\n                      删除题目\n                    </v-btn>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"current_question = false\"\n                >\n                  关闭\n                </v-btn>\n                <v-btn color=\"blue darken-1\" text @click=\"edit_question\">\n                  修改\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n      <!-- 测试 -->\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"test_dialog\" persistent>\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">创建测试</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-col class=\"d-flex\" cols=\"12\" sm=\"6\">\n                    <v-text-field\n                      label=\"课程\"\n                      v-model=\"courseInfo.name\"\n                      disabled\n                    ></v-text-field>\n                    <v-text-field\n                      label=\"测试名称\"\n                      v-model=\"test_name\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-row justify=\"center\">\n                    <v-card class=\"ma-2 grey lighten-3\">\n                      <v-card-title>开始时间</v-card-title>\n                      <v-date-picker\n                        v-model=\"start_date\"\n                        class=\"mr-3 ml-3\"\n                        width=\"260\"\n                      ></v-date-picker>\n                      <v-time-picker\n                        v-model=\"start_time\"\n                        class=\"mr-3 ml-3\"\n                        width=\"260\"\n                      ></v-time-picker>\n                    </v-card>\n                    <v-card class=\"ma-2 grey lighten-3\">\n                      <v-card-title>结束时间</v-card-title>\n                      <v-date-picker\n                        v-model=\"end_date\"\n                        class=\"mr-3 ml-3\"\n                        width=\"260\"\n                      ></v-date-picker>\n                      <v-time-picker\n                        v-model=\"end_time\"\n                        class=\"mr-3 ml-3\"\n                        width=\"260\"\n                      ></v-time-picker>\n                    </v-card>\n                  </v-row>\n                  <v-list subheader two-line>\n                    <v-list-item v-for=\"id in questionIdList\" :key=\"id\">\n                      <v-list-item-avatar>\n                        <v-icon class=\"grey lighten-1\" dark>\n                          mdi-file\n                        </v-icon>\n                      </v-list-item-avatar>\n\n                      <v-list-item-content>\n                        <v-list-item-title\n                          v-text=\"\n                            questions.find(q => q.questionId === id)\n                              .questionType\n                          \"\n                        ></v-list-item-title>\n\n                        <v-list-item-subtitle\n                          v-text=\"\n                            questions.find(q => q.questionId === id).question\n                          \"\n                        ></v-list-item-subtitle>\n                      </v-list-item-content>\n                    </v-list-item>\n                  </v-list>\n                  <v-btn @click=\"add_question_dialog = true\">编辑题目</v-btn>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"test_dialog = false\">\n                  关闭\n                </v-btn>\n                <v-btn color=\"blue darken-1\" text @click=\"test\">\n                  创建\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"test_detail\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">测试信息</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-list subheader two-line>\n                    <v-list-item\n                      v-for=\"question in currentTest\"\n                      :key=\"question.questionId\"\n                    >\n                      <v-list-item-avatar>\n                        <v-icon class=\"grey lighten-1\" dark>\n                          mdi-file\n                        </v-icon>\n                      </v-list-item-avatar>\n\n                      <v-list-item-content>\n                        <v-list-item-title\n                          v-text=\"question.questionType\"\n                        ></v-list-item-title>\n\n                        <v-list-item-subtitle\n                          v-text=\"question.question\"\n                        ></v-list-item-subtitle>\n                      </v-list-item-content>\n                    </v-list-item>\n                  </v-list>\n                  <v-row class=\"pa-2\">\n                    <v-btn color=\"error\" @click=\"delete_test\">\n                      删除测试\n                    </v-btn>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"test_detail = false\">\n                  关闭\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n      <!-- 课件列表 -->\n      <v-row v-if=\"what_show === 1\">\n        <v-col>\n          <v-card max-width=\"600\" class=\"mx-auto mt-8\">\n            <v-toolbar color=\"primary\" dark>\n              <v-toolbar-title>课程课件</v-toolbar-title>\n              <v-spacer></v-spacer>\n\n              <v-file-input\n                hide-input\n                prepend-icon=\"mdi-plus\"\n                v-model=\"instructionFile\"\n                @change=\"handleUploadFile\"\n              ></v-file-input>\n            </v-toolbar>\n\n            <v-list subheader two-line>\n              <v-list-item v-for=\"file in files\" :key=\"file.title\">\n                <v-list-item-avatar>\n                  <v-icon class=\"grey lighten-1\" dark>\n                    mdi-file\n                  </v-icon>\n                </v-list-item-avatar>\n\n                <v-list-item-content>\n                  <v-list-item-title v-text=\"file.title\"></v-list-item-title>\n\n                  <v-list-item-subtitle\n                    v-text=\"file.fileSize\"\n                  ></v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                  <v-btn icon>\n                    <v-icon\n                      color=\"grey lighten-1\"\n                      @click=\"showEditFileDialog(file.id)\"\n                      >mdi-more</v-icon\n                    >\n                  </v-btn>\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n        </v-col>\n        <v-col>\n          <v-card max-width=\"600\" class=\"mx-auto mt-8\">\n            <v-toolbar color=\"primary\" dark>\n              <v-toolbar-title>课程题目</v-toolbar-title>\n              <v-spacer></v-spacer>\n              <v-btn class=\"ma-2 blue\" dark @click=\"open_question\">\n                +\n              </v-btn>\n            </v-toolbar>\n\n            <v-list subheader two-line>\n              <v-list-item\n                v-for=\"question in questions\"\n                :key=\"question.questionId\"\n              >\n                <v-list-item-avatar>\n                  <v-icon class=\"grey lighten-1\" dark>\n                    mdi-file\n                  </v-icon>\n                </v-list-item-avatar>\n\n                <v-list-item-content>\n                  <v-list-item-title\n                    v-text=\"question.questionType\"\n                  ></v-list-item-title>\n\n                  <v-list-item-subtitle\n                    v-text=\"question.question\"\n                  ></v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                  <v-btn icon>\n                    <v-icon\n                      color=\"grey lighten-1\"\n                      @click=\"showCurrentQuestion(question.questionId)\"\n                      >mdi-more</v-icon\n                    >\n                  </v-btn>\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n        </v-col>\n      </v-row>\n\n      <!-- 课程信息 -->\n      <v-col v-if=\"what_show === 0\">\n        <form class=\"pa-12 grey lighten-5 mt-8\">\n          <v-text-field\n            v-model=\"courseInfo.name\"\n            label=\"课程名称\"\n            readonly\n          ></v-text-field>\n          <v-text-field\n            v-model=\"courseInfo.id\"\n            label=\"课程ID\"\n            readonly\n          ></v-text-field>\n          <v-select\n            :items=\"types\"\n            v-model=\"courseInfo.type\"\n            label=\"课程分类\"\n            readonly\n          ></v-select>\n          <v-textarea\n            v-model=\"courseInfo.intro\"\n            label=\"课程简介\"\n            readonly\n          ></v-textarea>\n          <v-text-field\n            v-model=\"courseInfo.school\"\n            label=\"所属学校\"\n            readonly\n          ></v-text-field>\n          <v-text-field\n            v-model=\"courseInfo.createTime\"\n            label=\"创建时间\"\n            readonly\n          ></v-text-field>\n          <v-text-field\n            v-model=\"courseInfo.teacherName\"\n            label=\"创建教师\"\n            readonly\n          ></v-text-field>\n          <v-switch\n            v-model=\"isCharge\"\n            :label=\"`是否为付费课程: ${isCharge.toString()}`\"\n            readonly\n          ></v-switch>\n          <v-text-field\n            v-show=\"isCharge\"\n            v-model=\"courseInfo.cost\"\n            label=\"课程价格(元)\"\n            readonly\n          ></v-text-field>\n        </form>\n      </v-col>\n      <!-- 测试 -->\n      <v-card class=\"mx-auto mt-8\" v-if=\"what_show === 2\">\n        <v-toolbar color=\"primary\" dark>\n          <v-toolbar-title>测试</v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn class=\"ma-2 blue\" dark @click=\"test_dialog = true\">\n            +\n          </v-btn>\n        </v-toolbar>\n\n        <v-list subheader two-line>\n          <v-list-item v-for=\"test in tests\" :key=\"test.testId\">\n            <v-list-item-avatar>\n              <v-icon class=\"grey lighten-1\" dark>\n                mdi-file\n              </v-icon>\n            </v-list-item-avatar>\n\n            <v-list-item-content>\n              <v-list-item-title v-text=\"test.testName\"></v-list-item-title>\n\n              <v-list-item-subtitle\n                v-text=\"test.testStatus\"\n              ></v-list-item-subtitle>\n            </v-list-item-content>\n\n            <v-list-item-action>\n              <v-btn icon>\n                <v-icon color=\"grey lighten-1\" @click=\"showTest(test.testId)\"\n                  >mdi-more</v-icon\n                >\n              </v-btn>\n            </v-list-item-action>\n          </v-list-item>\n        </v-list>\n      </v-card>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport { uploadFile } from \"@/api/file\";\nimport {\n  getCourseWareByCourse,\n  createCourseWare,\n  updateCourseWare,\n  deleteCourseWare\n} from \"@/api/courseWare\";\nimport { getCourseById } from \"@/api/course\";\nimport { createQuestion } from \"@/api/test\";\nimport { getQuestionList } from \"@/api/test\";\nimport { fixQuestion } from \"@/api/test\";\nimport { deleteQuestion } from \"@/api/test\";\nimport { getTestList } from \"@/api/test\";\nimport { createTest } from \"@/api/test\";\nimport { addQuestion } from \"@/api/test\";\nimport { getTest } from \"@/api/test\";\nimport { deleteTest } from \"@/api/test\";\n\nexport default {\n  name: \"CourseEdit\",\n\n  data() {\n    return {\n      courseInfo: {},\n      instructionFile: null,\n      types: [\"初级\", \"中级\", \"高级\"],\n      question_types: [\"ask\", \"choice\"],\n      msg: \"\",\n      files: [],\n      questions: [],\n      tests: [],\n      showAlert: false,\n      alertMsg: \"\",\n      dialog: false,\n      deleteDialog: false,\n      question_dialog: false,\n      current_question: false,\n      deleteQuestionDialog: false,\n      test_dialog: false,\n      add_question_dialog: false,\n      test_detail: false,\n      currentEditFile: {\n        id: 0,\n        courseId: 0,\n        number: 0,\n        title: \"\",\n        fileName: \"\",\n        fileType: \"\",\n        fileSize: \"\",\n        freeFlag: false,\n        downloadFlag: true,\n        availableFlag: false,\n        uploadTime: \"\"\n      },\n      currentQuestion: {\n        questionId: 0,\n        question: \"\",\n        answer: \"\",\n        analysis: \"\",\n        questionType: \"\"\n      },\n      question: {\n        id: 0,\n        type: \"\",\n        question: \"\",\n        answer: \"\",\n        analysis: \"\"\n      },\n      what_show: 0,\n      test_name: \"\",\n      start_date: \"\",\n      start_time: \"\",\n      end_time: \"\",\n      end_date: \"\",\n      testList: [],\n      questionIdList: [],\n      currentTestId: 0,\n      currentTest: []\n    };\n  },\n\n  computed: {\n    isCharge: function() {\n      return this.courseInfo.cost !== 0;\n    }\n  },\n\n  created() {\n    // console.log(this.$route.params);\n  },\n\n  methods: {\n    toPost(){\n      const { courseId } = this.$route.params;\n      this.$router.push(`/post/coursePost/${courseId}`);\n    },\n    async handleUploadFile() {\n      const formData = new window.FormData();\n      formData.append(\"file\", this.instructionFile);\n      const res = await uploadFile(formData);\n      if (res.code === 1) {\n        const { courseId } = this.$route.params;\n        const fileInfo = {\n          courseId: courseId,\n          number: this.files.length,\n          title: res.data.name,\n          fileName: res.data.name,\n          fileType: res.data.type,\n          fileSize: res.data.size,\n          freeFlag: true,\n          downloadFlag: true,\n          availableFlag: true\n        };\n        createCourseWare(fileInfo).then(res => {\n          console.log(res);\n          this.alertMsg = res.msg;\n          this.showAlert = true;\n          setTimeout(() => {\n            this.showAlert = false;\n            this.refreshFile();\n          }, 1000);\n        });\n      }\n    },\n\n    refreshFile() {\n      const { courseId } = this.$route.params;\n      const uid = window.localStorage.getItem(\"userId\");\n      getCourseWareByCourse({ courseId, uid }).then(res => {\n        this.files = res || [];\n      });\n    },\n\n    getQuestions() {\n      const { courseId } = this.$route.params;\n      getQuestionList({ courseId }).then(res => {\n        this.questions = res.data;\n      });\n    },\n\n    loadCourse() {\n      const { courseId } = this.$route.params;\n      const uid = window.localStorage.getItem(\"userId\");\n      getCourseById({ uid, courseId }).then(res => {\n        this.courseInfo = res;\n        console.log(this.courseInfo);\n      });\n    },\n\n    showEditFileDialog(courseWareId) {\n      const currentFile = this.files.find(f => f.id === courseWareId);\n      console.log(currentFile);\n      this.currentEditFile = currentFile;\n      this.dialog = true;\n    },\n\n    showCurrentQuestion(id) {\n      const question = this.questions.find(f => f.questionId === id);\n      this.currentQuestion = {\n        questionId: question.questionId,\n        question: question.question,\n        answer: question.questionAnswer,\n        analysis: question.questionAnalysis,\n        questionType: question.questionType\n      };\n      this.current_question = true;\n    },\n    edit_question() {\n      const ha = this.currentQuestion;\n      if (ha.question === \"\" || ha.answer === \"\" || ha.answer === null) {\n        alert(\"题目信息不能有空\");\n        return;\n      }\n      fixQuestion({\n        questionId: ha.questionId,\n        question: ha.question,\n        questionAnswer: ha.answer,\n        questionAnalysis: ha.analysis,\n        questionType: ha.questionType\n      }).then(res => {\n        this.current_question = false;\n        this.alertMsg = res.msg;\n        this.showAlert = true;\n        setTimeout(() => {\n          this.showAlert = false;\n          this.getQuestions();\n        }, 1000);\n      });\n    },\n\n    handleEditSubmit() {\n      updateCourseWare(this.currentEditFile).then(res => {\n        this.dialog = false;\n        console.log(res);\n        this.alertMsg = res.msg;\n        this.showAlert = true;\n        setTimeout(() => {\n          this.showAlert = false;\n          this.refreshFile();\n        }, 1000);\n      });\n    },\n\n    showDeleteFileDialog() {\n      this.deleteDialog = true;\n    },\n\n    handleDeleteCourseWare() {\n      deleteCourseWare(this.currentEditFile.id).then(res => {\n        this.alertMsg = res.msg;\n        this.deleteDialog = false;\n        this.dialog = false;\n        this.showAlert = true;\n        this.refreshFile();\n        setTimeout(() => {\n          this.showAlert = false;\n        }, 1000);\n      });\n    },\n    delete_question() {\n      deleteQuestion(this.currentQuestion.questionId).then(res => {\n        this.alertMsg = res.msg;\n        this.deleteQuestionDialog = false;\n        this.currentQuestion = false;\n        this.showAlert = true;\n        this.getQuestions();\n        setTimeout(() => {\n          this.showAlert = false;\n        }, 1000);\n      });\n    },\n    to_msg() {\n      this.what_show = 0;\n    },\n    to_course() {\n      this.what_show = 1;\n    },\n    to_test() {\n      this.what_show = 2;\n    },\n    open_question() {\n      console.log(this.courseInfo);\n      this.question_dialog = !this.question_dialog;\n    },\n    add_question() {\n      this.question.id = this.courseInfo.id;\n      const ha = this.question;\n      if (ha.question === \"\" || ha.answer === \"\" || ha.answer === null) {\n        alert(\"题目信息不能有空\");\n        return;\n      }\n      createQuestion({\n        question: ha.question,\n        questionAnswer: ha.answer,\n        questionAnalysis: ha.analysis,\n        courseId: ha.id,\n        questionType: ha.type\n      }).then(res => {\n        this.question_dialog = false;\n        this.alertMsg = res.msg;\n        this.showAlert = true;\n        setTimeout(() => {\n          this.showAlert = false;\n          this.getQuestions();\n        }, 1000);\n      });\n    },\n\n    getTests() {\n      const { courseId } = this.$route.params;\n      getTestList({ courseId }).then(res => {\n        this.tests = res.data;\n      });\n    },\n    async test() {\n      const start = this.start_date + \"T\" + this.start_time + \":00.000Z\";\n      const end = this.end_date + \"T\" + this.end_time + \":00.000Z\";\n      if (this.questionIdList.length === 0) {\n        alert(\"题目为空\");\n        return;\n      }\n      if (start === \"\" || end === \"\" || this.test_name === \"\") {\n        alert(\"有内容为空\");\n        return;\n      }\n      if (start > end) {\n        alert(\"时间设置错误\");\n        return;\n      }\n      let id;\n      await createTest({\n        courseId: this.courseInfo.id,\n        test: this.test_name,\n        startTime: start,\n        endTime: end\n      }).then(res => {\n        id = res.data.data.testId;\n      });\n      addQuestion({testId: id, questionIdList: this.questionIdList}).then(\n          res => {\n            this.test_dialog = false;\n            this.showAlert = true;\n            this.alertMsg = res.msg;\n            this.getTests();\n            setTimeout(() => {\n              this.showAlert = false;\n            }, 1000);\n          }\n      );\n    },\n    add_to_test(id) {\n      const index = this.questionIdList.indexOf(id);\n      if (index === -1) {\n        this.questionIdList.push(id);\n      } else {\n        this.questionIdList.splice(index, 1);\n      }\n      console.log(this.questionIdList);\n    },\n    showTest(id) {\n      this.test_detail = true;\n      this.currentTestId = id;\n      console.log(id);\n      getTest({ testId: id }).then(res => {\n        this.currentTest = res.data.data;\n        console.log(this.currentTest);\n      });\n    },\n    delete_test() {\n      deleteTest({ testId: this.currentTestId }).then(res => {\n        this.test_detail = false;\n        this.showAlert = true;\n        this.alertMsg = res.msg;\n        this.getTests();\n        setTimeout(() => {\n          this.showAlert = false;\n        }, 1000);\n      });\n    }\n  },\n\n  mounted() {\n    this.refreshFile();\n    this.loadCourse();\n    this.getQuestions();\n    this.getTests();\n  }\n};\n</script>\n\n<style scoped>\n.alert {\n  position: fixed;\n  left: 50%;\n  top: 100px;\n  z-index: 999;\n}\n.fixed {\n  position: fixed;\n}\n</style>\n"]}]}