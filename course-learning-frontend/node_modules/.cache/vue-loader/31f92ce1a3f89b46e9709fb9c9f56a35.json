{"remainingRequest":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/src/views/Post/PostDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/src/views/Post/PostDetail.vue","mtime":1625937328234},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUG9zdERldGFpbCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBvc3RUaXRsZTogIiIsCiAgICAgIHBvc3RDb250ZW50OiAiIiwKICAgICAgcG9zdElkOiAwLAogICAgICBwYWdlTm86IDEsCiAgICAgIG51bWJlcjogNCwKICAgICAgcmVwbHlMaXN0czogW10sCiAgICAgIHJlcGx5Q29udGVudDogbnVsbCwKICAgICAgdG90YWxQYWdlczogMCwKICAgICAgdXNlcklkOiAwIC8v5biW5a2Q5Y+R6KGo55So5oi355qEaWQKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBqdW1wVG9SZXBseURldGFpbChpdGVtKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvcG9zdC9yZXBseURldGFpbC8ke2l0ZW0ucmVwbHlJZH0vJHtpdGVtLnJlcGx5Q29udGVudH0vJHtpdGVtLnJlcGx5VXNlcklkfWApOwogICAgfSwKICAgIHJlcGx5KCkgewogICAgICBsZXQgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgICAgIGJhc2VVUkw6ICJodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpIiwKICAgICAgICB0aW1lb3V0OiAxMDAwIC8vIOi2heaXtuaXtumVvwogICAgICB9KTsKICAgICAgaWYgKHRoaXMucmVwbHlDb250ZW50ICE9IG51bGwpIHsKICAgICAgICBjb25zdCByZXBseUluZm8gPSB7CiAgICAgICAgICByZXBseUlkOiAxMiwKICAgICAgICAgIHBvc3RJZDogdGhpcy5wb3N0SWQsCiAgICAgICAgICByZXBseVVzZXJJZDogd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKSwKICAgICAgICAgIHJlcGxpZWRVc2VySWQ6IHRoaXMudXNlcklkLAogICAgICAgICAgcmVwbHlDb250ZW50OiB0aGlzLnJlcGx5Q29udGVudCwKICAgICAgICAgIHJlcGxpZWRJZDogMCwKICAgICAgICAgIHJlcGx5VGltZTogbmV3IERhdGUoKSwKICAgICAgICAgIHN0YXR1czogMAogICAgICAgIH07CiAgICAgICAgaW5zdGFuY2UucG9zdChgL3Bvc3QvcmVwbHkvY3JlYXRlYCwgcmVwbHlJbmZvKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy5nZXRQb3N0RGV0YWlsKCk7CiAgICAgICAgICB0aGlzLnJlcGx5Q29udGVudCA9IG51bGw7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBnZXROZXh0UmVwbHlMaXN0cygpIHsKICAgICAgdGhpcy5wYWdlTm8rKzsKICAgICAgbGV0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICAgICAgICBiYXNlVVJMOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaSIsCiAgICAgICAgdGltZW91dDogMTAwMCAvLyDotoXml7bml7bplb8KICAgICAgfSk7CiAgICAgIGluc3RhbmNlCiAgICAgICAgLmdldCgKICAgICAgICAgIGAvcG9zdC9zZWFyY2gvcG9zdC8ke3RoaXMucGFnZU5vfS8ke3RoaXMubnVtYmVyfT9wb3N0SWQ9JHsKICAgICAgICAgICAgdGhpcy5wb3N0SWQKICAgICAgICAgIH0mdXNlcklkPSR7d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKX1gCiAgICAgICAgKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy5yZXBseUxpc3RzID0gcmVzLmRhdGEubGlzdDsKICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IHJlcy5kYXRhLnBhZ2VzOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldFByZXZpb3VzUmVwbHlMaXN0cygpIHsKICAgICAgdGhpcy5wYWdlTm8tLTsKICAgICAgbGV0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICAgICAgICBiYXNlVVJMOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FwaSIsCiAgICAgICAgdGltZW91dDogMTAwMCAvLyDotoXml7bml7bplb8KICAgICAgfSk7CiAgICAgIGluc3RhbmNlCiAgICAgICAgLmdldCgKICAgICAgICAgIGAvcG9zdC9zZWFyY2gvcG9zdC8ke3RoaXMucGFnZU5vfS8ke3RoaXMubnVtYmVyfT9wb3N0SWQ9JHsKICAgICAgICAgICAgdGhpcy5wb3N0SWQKICAgICAgICAgIH0mdXNlcklkPSR7d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySWQiKX1gCiAgICAgICAgKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgdGhpcy5yZXBseUxpc3RzID0gcmVzLmRhdGEubGlzdDsKICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IHJlcy5kYXRhLnBhZ2VzOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldFBvc3REZXRhaWwoKSB7CiAgICAgIHRoaXMucG9zdFRpdGxlID0gdGhpcy4kcm91dGUucGFyYW1zLnBvc3RUaXRsZTsKICAgICAgdGhpcy5wb3N0Q29udGVudCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wb3N0Q29udGVudDsKICAgICAgdGhpcy51c2VySWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcklkOwogICAgICBsZXQgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgICAgIGJhc2VVUkw6ICJodHRwOi8vbG9jYWxob3N0OjgwODEvYXBpIiwKICAgICAgICB0aW1lb3V0OiAxMDAwIC8vIOi2heaXtuaXtumVvwogICAgICB9KTsKCiAgICAgIHRoaXMucG9zdElkID0gdGhpcy4kcm91dGUucGFyYW1zLnBvc3RJZDsKICAgICAgaW5zdGFuY2UKICAgICAgICAuZ2V0KAogICAgICAgICAgYC9wb3N0L3NlYXJjaC9wb3N0LzEvJHt0aGlzLm51bWJlcn0/cG9zdElkPSR7CiAgICAgICAgICAgIHRoaXMucG9zdElkCiAgICAgICAgICB9JnVzZXJJZD0ke3dpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIil9YAogICAgICAgICkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIHRoaXMucmVwbHlMaXN0cyA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICB0aGlzLnRvdGFsUGFnZXMgPSByZXMuZGF0YS5wYWdlczsKICAgICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFBvc3REZXRhaWwoKTsKICB9Cn07Cg=="},{"version":3,"sources":["PostDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PostDetail.vue","sourceRoot":"src/views/Post","sourcesContent":["<template>\n  <div>\n    <v-container class=\"ma-8 pa-4\">\n      <v-card>\n        <v-card-title>{{ postTitle }}</v-card-title>\n        <v-card-text>{{ postContent }}</v-card-text>\n        <v-textarea v-model=\"replyContent\" label=\"请输入回复内容\"></v-textarea>\n        <v-card-actions @click=\"reply\"> 回复</v-card-actions>\n      </v-card>\n      <li v-for=\"(item, key, index) in replyLists\" :key=\"index\">\n        <v-card elevation=\"1\">\n          <v-card-text>{{ item.replyContent }}</v-card-text>\n          <v-card-actions @click=\"jumpToReplyDetail(item)\">查看详情</v-card-actions>\n        </v-card>\n      </li>\n      <v-pagination\n        v-model=\"pageNo\"\n        :length=\"totalPages\"\n        @next=\"getNextReplyLists\"\n        @previous=\"getPreviousReplyLists\"\n      >\n      </v-pagination>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"PostDetail\",\n  data() {\n    return {\n      postTitle: \"\",\n      postContent: \"\",\n      postId: 0,\n      pageNo: 1,\n      number: 4,\n      replyLists: [],\n      replyContent: null,\n      totalPages: 0,\n      userId: 0 //帖子发表用户的id\n    };\n  },\n  methods: {\n    jumpToReplyDetail(item) {\n      this.$router.push(`/post/replyDetail/${item.replyId}/${item.replyContent}/${item.replyUserId}`);\n    },\n    reply() {\n      let instance = axios.create({\n        baseURL: \"http://localhost:8081/api\",\n        timeout: 1000 // 超时时长\n      });\n      if (this.replyContent != null) {\n        const replyInfo = {\n          replyId: 12,\n          postId: this.postId,\n          replyUserId: window.localStorage.getItem(\"userId\"),\n          repliedUserId: this.userId,\n          replyContent: this.replyContent,\n          repliedId: 0,\n          replyTime: new Date(),\n          status: 0\n        };\n        instance.post(`/post/reply/create`, replyInfo).then(res => {\n          console.log(res);\n          this.getPostDetail();\n          this.replyContent = null;\n        });\n      }\n    },\n    getNextReplyLists() {\n      this.pageNo++;\n      let instance = axios.create({\n        baseURL: \"http://localhost:8081/api\",\n        timeout: 1000 // 超时时长\n      });\n      instance\n        .get(\n          `/post/search/post/${this.pageNo}/${this.number}?postId=${\n            this.postId\n          }&userId=${window.localStorage.getItem(\"userId\")}`\n        )\n        .then(res => {\n          console.log(res);\n          this.replyLists = res.data.list;\n          this.totalPages = res.data.pages;\n        });\n    },\n    getPreviousReplyLists() {\n      this.pageNo--;\n      let instance = axios.create({\n        baseURL: \"http://localhost:8081/api\",\n        timeout: 1000 // 超时时长\n      });\n      instance\n        .get(\n          `/post/search/post/${this.pageNo}/${this.number}?postId=${\n            this.postId\n          }&userId=${window.localStorage.getItem(\"userId\")}`\n        )\n        .then(res => {\n          console.log(res);\n          this.replyLists = res.data.list;\n          this.totalPages = res.data.pages;\n        });\n    },\n    getPostDetail() {\n      this.postTitle = this.$route.params.postTitle;\n      this.postContent = this.$route.params.postContent;\n      this.userId = this.$route.params.userId;\n      let instance = axios.create({\n        baseURL: \"http://localhost:8081/api\",\n        timeout: 1000 // 超时时长\n      });\n\n      this.postId = this.$route.params.postId;\n      instance\n        .get(\n          `/post/search/post/1/${this.number}?postId=${\n            this.postId\n          }&userId=${window.localStorage.getItem(\"userId\")}`\n        )\n        .then(res => {\n          console.log(res);\n          this.replyLists = res.data.list;\n          this.totalPages = res.data.pages;\n        });\n    }\n  },\n  created() {\n    this.getPostDetail();\n  }\n};\n</script>\n\n<style scoped></style>\n"]}]}