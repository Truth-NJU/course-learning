{"remainingRequest":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/src/views/student/CourseStudy.vue?vue&type=style&index=0&id=60919150&scoped=true&lang=css&","dependencies":[{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/src/views/student/CourseStudy.vue","mtime":1625968314072},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/taozehua/Downloads/软工2大作业/course-learning-frontend/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hbGVydCB7CiAgcG9zaXRpb246IGZpeGVkOwogIGxlZnQ6IDUwJTsKICB0b3A6IDEwMHB4OwogIHotaW5kZXg6IDk5OTsKfQouZml4ZWQgewogIHBvc2l0aW9uOiBmaXhlZDsKfQo="},{"version":3,"sources":["CourseStudy.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CourseStudy.vue","sourceRoot":"src/views/student","sourcesContent":["<template>\n  <div>\n    <v-card class=\"ml-1 mt-8 fixed\">\n      <v-navigation-drawer permanent expand-on-hover width=\"170\">\n        <v-list nav dense>\n          <v-list-item link @click=\"what_show = 0\">\n            <v-list-item-icon>\n              <v-icon>mdi-folder</v-icon>\n            </v-list-item-icon>\n            <v-list-item-title>课程信息</v-list-item-title>\n          </v-list-item>\n          <v-list-item link @click=\"what_show = 1\">\n            <v-list-item-icon>\n              <v-icon>mdi-folder</v-icon>\n            </v-list-item-icon>\n            <v-list-item-title>课件</v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-navigation-drawer>\n    </v-card>\n    <v-container class=\"pl-16 pr-16\">\n      <!-- alert-->\n      <v-alert\n        class=\"alert\"\n        outlined\n        type=\"success\"\n        text\n        v-show=\"showAlert\"\n        transition=\"scroll-y-transition\"\n      >\n        {{ alertMsg }}\n      </v-alert>\n\n      <!-- dialog-->\n      <template>\n        <v-btn color=\"blue darken-1\" @click=\"jumpToTalkArea\">\n          课程讨论区\n        </v-btn>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">课件详情</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <v-text-field\n                        label=\"文件类型\"\n                        v-model=\"currentFile.fileType\"\n                        readonly\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <v-text-field\n                        label=\"文件大小\"\n                        v-model=\"currentFile.fileSize\"\n                        readonly\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\">\n                      <v-text-field\n                        label=\"文件名\"\n                        v-model=\"currentFile.fileName\"\n                        readonly\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\">\n                      <v-text-field\n                        label=\"课件标题\"\n                        v-model=\"currentFile.title\"\n                        readonly\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <v-select\n                        :items=\"[true, false]\"\n                        label=\"是否免费\"\n                        v-model=\"currentFile.freeFlag\"\n                        readonly\n                      ></v-select>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <v-select\n                        :items=\"[true, false]\"\n                        label=\"是否可下载\"\n                        v-model=\"currentFile.downloadFlag\"\n                        readonly\n                      ></v-select>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\">\n                      <v-select\n                        :items=\"[true, false]\"\n                        label=\"是否有权查看\"\n                        v-model=\"currentFile.availableFlag\"\n                        readonly\n                      ></v-select>\n                    </v-col>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"dialog = false\">\n                  Close\n                </v-btn>\n                <v-btn\n                  v-show=\"currentFile.downloadFlag\"\n                  color=\"blue darken-1\"\n                  text\n                  @click=\"handleDownloadFile\"\n                >\n                  下载课件\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n\n      <!-- 考试-->\n      <template>\n        <v-row>\n          <v-dialog v-model=\"my_test\" v-if=\"!currentTest.isFinished\">\n            <v-card>\n              <v-card-title>{{ currentTest.testName }}</v-card-title>\n              <v-col>\n                <v-card\n                  v-for=\"question in currentQuestion\"\n                  :key=\"question.questionId\"\n                  class=\"ma-2 pa-3 grey lighten-3\"\n                >\n                  <v-card-title>\n                    {{ question.question + \"(\" + question.questionType + \")\" }}\n                  </v-card-title>\n                  <v-text-field\n                    label=\"答案\"\n                    v-model=\"\n                      answers.find(a => a.questionId === question.questionId)\n                        .answer\n                    \"\n                    @blur=\"\n                      done(\n                        question.questionId,\n                        answers.find(a => a.questionId === question.questionId)\n                          .answer\n                      )\n                    \"\n                  ></v-text-field>\n                </v-card>\n              </v-col>\n              <v-card-actions>\n                <v-btn @click=\"submit\">查看</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n          <v-dialog v-model=\"my_test\" v-if=\"currentTest.isFinished\">\n            <v-card>\n              <v-card-title>{{ currentTest.testName }}</v-card-title>\n              <v-col>\n                <v-card\n                  v-for=\"question in currentQuestion\"\n                  :key=\"question.questionId\"\n                  class=\"ma-2 pa-3 grey lighten-3\"\n                >\n                  <v-card-title>\n                    {{ question.question + \"(\" + question.questionType + \")\" }}\n                  </v-card-title>\n                  <v-row>\n                    <v-text-field\n                      label=\"我的答案\"\n                      disabled\n                      v-model=\"question.studentsAnswer\"\n                    ></v-text-field>\n                    <v-text-field\n                      label=\"正确答案\"\n                      disabled\n                      v-model=\"question.questionAnswer\"\n                    ></v-text-field>\n                    <v-text-field\n                      label=\"是否正确\"\n                      disabled\n                      v-model=\"question.isRight\"\n                    ></v-text-field>\n                  </v-row>\n                  <v-textarea\n                    label=\"解析\"\n                    disabled\n                    v-model=\"question.questionAnalysis\"\n                  >\n                  </v-textarea>\n                  <v-text-field\n                    label=\"成绩\"\n                    disabled\n                    v-model=\"currentTest.score\"\n                  >\n                  </v-text-field>\n                </v-card>\n              </v-col>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n      <template>\n        <v-row justify=\"center\">\n          <v-dialog v-model=\"test_detail\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">测试信息</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-text-field\n                      label=\"测试名称\"\n                      v-model=\"currentTest.testName\"\n                      disabled\n                    ></v-text-field>\n                    <v-text-field\n                      label=\"是否完成\"\n                      v-model=\"currentTest.isFinished\"\n                      disabled\n                    ></v-text-field>\n                  </v-row>\n                  <v-row>\n                    <v-text-field\n                      label=\"开始时间\"\n                      v-model=\"currentTest.startTime\"\n                      disabled\n                    ></v-text-field>\n                    <v-text-field\n                      label=\"结束时间\"\n                      v-model=\"currentTest.endTime\"\n                      disabled\n                    ></v-text-field>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn\n                  color=\"blue darken-1\"\n                  @click=\"my_test_detail\"\n                  v-if=\"currentTest.testStatus === 'Running'||currentTest.testStatus==='Finish'\"\n                  >{{ currentTest.isFinished ? \"查看\" : \"参加考试\" }}</v-btn\n                >\n                <v-btn color=\"blue darken-1\" @click=\"my_test_detail\" v-else disabled>{{\n                  currentTest.isFinished ? \"查看\" : \"参加考试\"\n                }}</v-btn>\n                <v-btn color=\"blue darken-1\" @click=\"test_detail = false\">\n                  关闭\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-row>\n      </template>\n\n      <v-row v-if=\"what_show === 1\">\n        <!-- 课件 -->\n        <v-col>\n          <v-card max-width=\"600\" class=\"mx-auto mt-8\">\n            <v-toolbar color=\"indigo lighten-2\" dark>\n              <v-app-bar-nav-icon></v-app-bar-nav-icon>\n              <v-toolbar-title>下载课件</v-toolbar-title>\n              <v-spacer></v-spacer>\n            </v-toolbar>\n\n            <v-list subheader two-line>\n              <v-list-item v-for=\"file in files\" :key=\"file.title\">\n                <v-list-item-avatar>\n                  <v-icon class=\"grey lighten-1\" dark>\n                    mdi-file\n                  </v-icon>\n                </v-list-item-avatar>\n\n                <v-list-item-content>\n                  <v-list-item-title v-text=\"file.title\"></v-list-item-title>\n\n                  <v-list-item-subtitle\n                    v-text=\"file.fileSize\"\n                  ></v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                  <v-btn icon>\n                    <v-icon\n                      color=\"grey lighten-1\"\n                      @click=\"showFileDialog(file.id)\"\n                      >mdi-more</v-icon\n                    >\n                  </v-btn>\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n        </v-col>\n        <!-- 测试 -->\n        <v-col>\n          <v-card max-width=\"600\" class=\"mx-auto mt-8\">\n            <v-toolbar color=\"primary\" dark>\n              <v-toolbar-title>课程题目</v-toolbar-title>\n              <v-spacer></v-spacer>\n            </v-toolbar>\n            <v-list subheader two-line>\n              <v-list-item v-for=\"test in tests\" :key=\"test.testId\">\n                <v-list-item-avatar>\n                  <v-icon class=\"grey lighten-1\" dark>\n                    mdi-file\n                  </v-icon>\n                </v-list-item-avatar>\n\n                <v-list-item-content>\n                  <v-list-item-title v-text=\"test.testName\"></v-list-item-title>\n\n                  <v-list-item-subtitle\n                    v-text=\"test.testStatus\"\n                  ></v-list-item-subtitle>\n                </v-list-item-content>\n\n                <v-list-item-action>\n                  <v-btn icon @click=\"show_test(test.testId)\">\n                    <v-icon color=\"grey lighten-1\">mdi-more</v-icon>\n                    详情\n                  </v-btn>\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n        </v-col>\n      </v-row>\n      <v-col v-if=\"what_show === 0\">\n        <form class=\"pa-12 grey lighten-5 mt-8\" style=\"position: sticky;top: 0\">\n          <v-text-field\n            v-model=\"courseInfo.name\"\n            label=\"课程名称\"\n            readonly\n          ></v-text-field>\n          <v-text-field\n            v-model=\"courseInfo.id\"\n            label=\"课程ID\"\n            readonly\n          ></v-text-field>\n          <v-select\n            :items=\"types\"\n            v-model=\"courseInfo.type\"\n            label=\"课程分类\"\n            readonly\n          ></v-select>\n          <v-textarea\n            v-model=\"courseInfo.intro\"\n            label=\"课程简介\"\n            readonly\n          ></v-textarea>\n          <v-text-field\n            v-model=\"courseInfo.school\"\n            label=\"所属学校\"\n            readonly\n          ></v-text-field>\n          <v-text-field\n            v-model=\"courseInfo.createTime\"\n            label=\"创建时间\"\n            readonly\n          ></v-text-field>\n          <v-text-field\n            v-model=\"courseInfo.teacherName\"\n            label=\"创建教师\"\n            readonly\n          ></v-text-field>\n          <v-switch\n            v-model=\"isCharge\"\n            :label=\"`是否为付费课程: ${isCharge.toString()}`\"\n            readonly\n          ></v-switch>\n          <v-text-field\n            v-show=\"isCharge\"\n            v-model=\"courseInfo.cost\"\n            label=\"课程价格(元)\"\n            readonly\n          ></v-text-field>\n        </form>\n      </v-col>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport { getCourseWareByCourse } from \"@/api/courseWare\";\nimport { getCourseById } from \"@/api/course\";\nimport { FILE_BASE_PATH } from \"@/api/file\";\nimport { sGetTest } from \"@/api/test\";\nimport { sGetQuestion } from \"@/api/test\";\nimport { commit } from \"@/api/test\";\n\nexport default {\n  name: \"CourseEdit\",\n\n  data() {\n    return {\n      my_test: false,\n      test_detail: false,\n      what_show: 0,\n      courseInfo: {},\n      types: [\"初级\", \"中级\", \"高级\"],\n      msg: \"\",\n      files: [],\n      showAlert: false,\n      alertMsg: \"\",\n      dialog: false,\n      currentFile: {\n        id: 0,\n        courseId: 0,\n        number: 0,\n        title: \"\",\n        fileName: \"\",\n        fileType: \"\",\n        fileSize: \"\",\n        freeFlag: false,\n        downloadFlag: true,\n        availableFlag: false,\n        uploadTime: \"\"\n      },\n      tests: [],\n      currentTest: {},\n      currentQuestion: [],\n      answers: [],\n      answersMap: {}\n    };\n  },\n\n  computed: {\n    isCharge: function() {\n      return this.courseInfo.cost !== 0;\n    }\n  },\n\n  methods: {\n    refreshFile() {\n      const { courseId } = this.$route.params;\n      const uid = window.localStorage.getItem(\"userId\");\n      getCourseWareByCourse({ courseId, uid }).then(res => {\n        this.files = res || [];\n      });\n    },\n\n    loadCourse() {\n      const { courseId } = this.$route.params;\n      const uid = window.localStorage.getItem(\"userId\");\n      getCourseById({ uid, courseId }).then(res => {\n        this.courseInfo = res;\n      });\n    },\n\n    jumpToTalkArea() {\n      const { courseId } = this.$route.params;\n      this.$router.push(`/post/coursePost/${courseId}`);\n    },\n\n    showFileDialog(courseWareId) {\n      const currentFile = this.files.find(f => f.id === courseWareId);\n      console.log(currentFile);\n      this.currentFile = currentFile;\n      this.dialog = true;\n    },\n\n    handleDownloadFile() {\n      // downloadFile(this.currentFile.fileName).then((res) => {\n      //   console.log(res);\n      //   this.alertMsg = \"下载成功！\";\n      //   this.showAlert = true;\n      //   this.dialog = false;\n      //   setTimeout(() => {\n      //     this.showAlert = false;\n      //   }, 1000);\n      // });\n      window.open(`${FILE_BASE_PATH}/${this.currentFile.fileName}`);\n    },\n    getTests() {\n      const { courseId } = this.$route.params;\n      const uid = window.localStorage.getItem(\"userId\");\n      sGetTest({ courseId: courseId, userId: uid }).then(res => {\n        this.tests = res.data.data;\n      });\n    },\n    show_test(id) {\n      this.currentTest = this.tests.find(f => f.testId === id);\n      this.test_detail = true;\n    },\n    my_test_detail() {\n      const uid = window.localStorage.getItem(\"userId\");\n      sGetQuestion({ testId: this.currentTest.testId, userId: uid }).then(\n        res => {\n          this.currentQuestion = res.data.data;\n          this.answersMap = new Map();\n          for (let i = 0; i < this.currentQuestion.length; i++) {\n            if (this.currentQuestion[i].questionAnswer === null) {\n              this.currentQuestion[i].questionAnswer = \"答案暂未公布\";\n              this.currentQuestion[i].questionAnalysis = \"答案暂未公布\";\n            }\n            this.answersMap.set(this.currentQuestion[i].questionId + \"\", \"\");\n            this.answers.push({\n              questionId: this.currentQuestion[i].questionId,\n              answer: \"\"\n            });\n          }\n          console.log(res);\n        }\n      );\n      this.my_test = true;\n    },\n    done(questionId, answer) {\n      this.answersMap.set(questionId + \"\", answer);\n    },\n    submit() {\n      const uid = window.localStorage.getItem(\"userId\");\n      commit({\n        testId: this.currentTest.testId,\n        userId: parseInt(uid),\n        questionIdAnswers1: this.answersMap\n      }).then(res => {\n        this.my_test = false;\n        this.showAlert = true;\n        this.alertMsg = res.msg;\n        this.getTests();\n        setTimeout(() => {\n          this.showAlert = false;\n        }, 1000);\n      });\n    }\n  },\n\n  mounted() {\n    this.refreshFile();\n    this.loadCourse();\n    this.getTests();\n  }\n};\n</script>\n\n<style scoped>\n.alert {\n  position: fixed;\n  left: 50%;\n  top: 100px;\n  z-index: 999;\n}\n.fixed {\n  position: fixed;\n}\n</style>\n"]}]}